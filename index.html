<!DOCTYPE html>
<html>
<head>
  <script src="https://static-content-qas.vnforapps.com/env/sandbox/js/checkout.js"></script>
</head>
<body>
  <form id="checkoutForm"
    action="https://www.tuweb.com/respuesta"
    method="POST"
    data-sessiontoken=""
    data-channel="web"
    data-merchantid="456879852"
    data-purchasenumber=""
    data-amount=""
    data-expirationminutes="10"
    data-timeouturl="https://www.tuweb.com/timeout"
    data-merchantlogo="https://www.tuweb.com/logo.png"
    data-merchantname="Tu Comercio"
    data-buttonsize="MEDIUM"
    data-buttoncolor="NAVY"
    data-formbuttoncolor="#FF0000"
    data-showamount="TRUE"
  >
  </form>

  <script>
    // Función que se ejecuta cuando el script de Niubiz se ha cargado
    window.onload = function() {
      // Leer parámetros de la URL
      const params = new URLSearchParams(window.location.search);

      // Establecer los atributos del formulario con los parámetros de la URL
      document.getElementById('checkoutForm').setAttribute('data-sessiontoken', params.get('sessionToken') || '');
      document.getElementById('checkoutForm').setAttribute('data-purchasenumber', params.get('purchaseNumber') || '');
      document.getElementById('checkoutForm').setAttribute('data-amount', params.get('amount') || '');

      // Esperar a que el script de Checkout se haya cargado antes de llamarlo
      if (typeof Checkout !== 'undefined') {
        Checkout.open();
      } else {
        console.error('El objeto Checkout no está definido. Verifica si el script de Niubiz se cargó correctamente.');
      }
    };
  </script>
</body>
</html>

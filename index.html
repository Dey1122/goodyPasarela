<!DOCTYPE html>
<html>
<head>
  <script>
    function initializeCheckout() {
      console.log('Script de Niubiz cargado correctamente.');
      const params = new URLSearchParams(window.location.search);
      const checkoutForm = document.getElementById('checkoutForm');
      
      if (checkoutForm) {
        checkoutForm.setAttribute('data-sessiontoken', params.get('sessionToken') || '');
        checkoutForm.setAttribute('data-purchasenumber', params.get('purchaseNumber') || '');
        checkoutForm.setAttribute('data-amount', params.get('amount') || '');
        
        if (typeof Checkout !== 'undefined') {
          Checkout.open(); 
        } else {
          console.error('El objeto Checkout no está definido. Verifica si el script de Niubiz se cargó correctamente.');
        }
      } else {
        console.error('El formulario con el ID checkoutForm no se encuentra en el DOM.');
      }
    }

    // Función para manejar errores en el script de Niubiz
    function handleScriptError() {
      console.error('Hubo un error al cargar el script de Niubiz.');
    }

    // Esperar a que el DOM esté completamente cargado
    document.addEventListener('DOMContentLoaded', function () {
      // Cargar el script de Niubiz después de que el DOM esté listo
      const script = document.createElement('script');
      script.src = "https://static-content-qas.vnforapps.com/env/sandbox/js/checkout.js";
      script.onload = initializeCheckout;
      script.onerror = handleScriptError;
      document.head.appendChild(script);
    });
  </script>
</head>
<body>
  <!-- Formulario de pago -->
  <form id="checkoutForm"
    action="https://www.tuweb.com/respuesta"
    method="POST"
    data-sessiontoken=""
    data-channel="web"
    data-merchantid="456879852"
    data-purchasenumber=""
    data-amount=""
    data-expirationminutes="10"
    data-timeouturl="https://www.tuweb.com/timeout"
    data-merchantlogo="https://www.tuweb.com/logo.png"
    data-merchantname="Tu Comercio"
    data-buttonsize="MEDIUM"
    data-buttoncolor="NAVY"
    data-formbuttoncolor="#FF0000"
    data-showamount="TRUE"
  >
  </form>
</body>
</html>
